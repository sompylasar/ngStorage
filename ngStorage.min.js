/*! ngStorage 0.3.3 | Copyright (c) 2014 Gias Kay Lee | MIT License */"use strict";!function(){function a(a){var b="ngStorage-";return{setPrefix:function(a){angular.isString(a)&&(b=a)},$get:["$rootScope","$window","$timeout","$log",function(c,d,e,f){function g(a){var b=d[a];if(b&&"localStorage"===a){var c="__"+Math.round(1e7*Math.random());try{b.setItem(c,c),b.removeItem(c)}catch(e){b=void 0}}return b||f.warn("This browser does not support Web Storage!"),b}for(var h,i,j,k={setItem:function(){},getItem:function(){},removeItem:function(){},key:function(){},length:0},l=g(a)||k,m={$supported:function(){return l&&l!==k},$default:function(a){for(var b in a)angular.isDefined(m[b])||(m[b]=a[b]);return m},$reset:function(a){for(var c in m)"$"===c[0]||delete m[c]&&l.removeItem(b+c);return m.$default(a)}},n=b.length,o=0;o<l.length;o++)(j=l.key(o))&&b===j.slice(0,n)&&(m[j.slice(n)]=angular.fromJson(l.getItem(j)));return h=angular.copy(m),c.$watch(function(){i||(i=e(function(){if(i=null,!angular.equals(m,h)){angular.forEach(m,function(a,c){angular.isDefined(a)&&"$"!==c[0]&&l.setItem(b+c,angular.toJson(a)),delete h[c]});for(var a in h)l.removeItem(b+a);h=angular.copy(m)}},100))}),"localStorage"===a&&d.addEventListener&&d.addEventListener("storage",function(a){b===a.key.slice(0,n)&&(a.newValue?m[a.key.slice(n)]=angular.fromJson(a.newValue):delete m[a.key.slice(n)],h=angular.copy(m),c.$apply())}),m}]}}angular.module("ngStorage",[]).provider("$localStorage",a("localStorage")).provider("$sessionStorage",a("sessionStorage"))}();