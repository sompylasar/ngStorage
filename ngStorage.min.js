/*! ngStorage 0.3.3 | Copyright (c) 2014 Gias Kay Lee | MIT License */"use strict";!function(){function a(a){var b="ngStorage-"+a+"-";return{setPrefix:function(a){angular.isString(a)&&(b=a)},$get:["$rootScope","$window","$timeout","$log",function(c,d,e,f){function g(a){var b=d[a];if(b&&"localStorage"===a){var c="__"+Math.round(1e7*Math.random());try{b.setItem(c,c),b.removeItem(c)}catch(e){b=void 0}}return b||f.warn("This browser does not support Web Storage!"),b}for(var h,i,j,k=b,l=k.length,m={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},key:function(){},length:0},n=g(a)||m,o={$supported:function(){return n&&n!==m},$default:function(a){for(var b in a)angular.isDefined(o[b])||(o[b]=a[b]);return o},$reset:function(a){for(var b in o)"$"===b[0]||delete o[b]&&n.removeItem(k+b);return o.$default(a)}},p=0;p<n.length;p++)(j=n.key(p))&&k===j.slice(0,l)&&(o[j.slice(l)]=angular.fromJson(n.getItem(j)));return h=angular.copy(o),c.$watch(function(){i||(i=e(function(){if(i=null,!angular.equals(o,h)){angular.forEach(o,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&n.setItem(k+b,angular.toJson(a)),delete h[b]});for(var a in h)n.removeItem(k+a);h=angular.copy(o)}},100))}),d.addEventListener&&d.addEventListener("storage",function(a){k===a.key.slice(0,l)&&(a.newValue?o[a.key.slice(l)]=angular.fromJson(a.newValue):delete o[a.key.slice(l)],h=angular.copy(o),c.$apply())}),o}]}}angular.module("ngStorage",[]).provider("$localStorage",a("localStorage")).provider("$sessionStorage",a("sessionStorage"))}();