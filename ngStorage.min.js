/*! ngStorage 0.3.2 | Copyright (c) 2014 Gias Kay Lee | MIT License */"use strict";!function(){function a(a){var b="ngStorage-";return{setPrefix:function(a){angular.isString(a)&&(b=a)},$get:["$rootScope","$window","$timeout","$log",function(c,d,e,f){function g(a){var b=d[a];if(b&&"localStorage"===a){var c="__"+Math.round(1e7*Math.random());try{localStorage.setItem(c,c),localStorage.removeItem(c)}catch(e){b=!1}}return b}for(var h,i,j,k=g(a)||(f.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),l={$default:function(a){for(var b in a)angular.isDefined(l[b])||(l[b]=a[b]);return l},$reset:function(a){for(var c in l)"$"===c[0]||delete l[c]&&k.removeItem(b+c);return l.$default(a)}},m=b.length,n=0;n<k.length;n++)(j=k.key(n))&&b===j.slice(0,m)&&(l[j.slice(m)]=angular.fromJson(k.getItem(j)));return h=angular.copy(l),c.$watch(function(){i||(i=e(function(){if(i=null,!angular.equals(l,h)){angular.forEach(l,function(a,c){angular.isDefined(a)&&"$"!==c[0]&&k.setItem(b+c,angular.toJson(a)),delete h[c]});for(var a in h)k.removeItem(b+a);h=angular.copy(l)}},100))}),"localStorage"===a&&d.addEventListener&&d.addEventListener("storage",function(a){b===a.key.slice(0,m)&&(a.newValue?l[a.key.slice(m)]=angular.fromJson(a.newValue):delete l[a.key.slice(m)],h=angular.copy(l),c.$apply())}),l}]}}angular.module("ngStorage",[]).provider("$localStorage",a("localStorage")).provider("$sessionStorage",a("sessionStorage"))}();